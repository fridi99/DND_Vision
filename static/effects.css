:root{
  --overlay-z: 9999;
  --pop-z: 10000;
  --tooltip-z: 10001;
  --panel: #161a22;
  --muted: #9aa4b2;
  --text: #e6e9ef;
  --accent: #7c94ff;
  --ring: 0 0 0 3px rgba(124,148,255,0.45);
}

html, body { height: 100%; }

body{
  margin: 0;
  color: var(--text);
  font: 14px/1.4 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;

  /* Hintergrundbild (Standard) */
  background:
    linear-gradient(rgba(0,0,0,.45), rgba(0,0,0,.45)),
    url('images/dragon-background.jpeg') center/cover no-repeat fixed;
}

/* Blood-Effekt */
body.effect-blood {
  background:
    linear-gradient(rgba(0,0,0,.45), rgba(0,0,0,.45)),
    url('images/blood_effect.jpg') center/cover no-repeat fixed;
}

/* Ice-Effekt */
body.effect-ice {
  background:
    linear-gradient(rgba(0,0,0,.35), rgba(0,0,0,.35)),
    url('images/ice_effect.jpg') center/cover no-repeat fixed;
}

/* Fire-Effekt */
body.effect-fire {
  background:
    linear-gradient(rgba(0,0,0,.45), rgba(0,0,0,.45)),
    url('images/fire_effect.jpg') center/cover no-repeat fixed;
}

.app{
  min-height: 100%;
  display: grid;
  place-items: center;
  padding: 2rem;
}

.card{
  background: rgba(255,255,255,0.03);
  backdrop-filter: blur(8px);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: 16px;
  padding: 24px;
  max-width: 720px;
  width: 100%;
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
}

.row{ display:flex; gap:.75rem; align-items:center; flex-wrap:wrap; }
.spacer{ height:1rem; }

button{
  cursor:pointer;
  border:1px solid rgba(255,255,255,0.08);
  background: var(--panel);
  color: var(--text);
  padding:.6rem .9rem;
  border-radius:12px;
  transition: transform .06s ease, box-shadow .2s ease, border-color .2s ease;
  display:inline-flex; align-items:center; gap:.5rem;
}
button:hover{ border-color: rgba(255,255,255,0.22); }
button:active{ transform: translateY(1px); }
button:focus-visible{ outline:none; box-shadow: var(--ring); }
.primary{ background:#252c3d; }
.muted{ color: var(--muted); }

.kbd{
  font-family: ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace;
  font-size:.85em; padding:.1em .4em;
  border:1px solid rgba(255,255,255,.15);
  border-bottom-width:2px; border-radius:6px;
  background: rgba(255,255,255,.06);
}

/* Modal */
.modal-overlay{
  position:fixed; inset:0; background:rgba(0,0,0,.5);
  display:none; z-index: var(--overlay-z);
}
.modal{
  position:fixed; inset:0; display:none; z-index: var(--pop-z);
  place-items:center; padding:20px;
}
.modal.open, .modal-overlay.open{ display:grid; }
.modal-panel{
  width:100%; max-width:560px; background: var(--panel);
  border:1px solid rgba(255,255,255,.08); border-radius:16px; padding:20px;
  box-shadow:0 30px 80px rgba(0,0,0,.5);
}
.modal-header{ display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; }
.modal-title{ font-weight:600; letter-spacing:.3px; }

.grid{ display:grid; grid-template-columns:repeat(3,minmax(0,1fr)); gap:12px; margin-top:10px; }
.fx-btn{ position:relative; padding:14px; border-radius:12px; text-align:center; user-select:none; }
.fx-btn.active{ outline:2px solid var(--accent); outline-offset:2px; }
.fx-icon{ font-size:22px; display:block; }
.fx-name{ display:block; font-weight:600; margin-top:6px; }

/* Tooltip */
.tooltip{
  position:absolute; left:50%; transform:translateX(-50%);
  bottom:calc(100% + 8px);
  background:#0c0f16; color:var(--text);
  border:1px solid rgba(255,255,255,.15);
  padding:.45rem .6rem; border-radius:8px; font-size:12px;
  white-space:nowrap; pointer-events:none; opacity:0; transition:opacity .12s ease;
  z-index: var(--tooltip-z);
}
.fx-btn:hover .tooltip{ opacity:1; }

/* Visual Effects */
.effect-blood::after{
  content:""; position:fixed; inset:0; pointer-events:none; z-index:9000;
  background:
    radial-gradient(closest-side at 20% 10%, rgba(150,0,0,.65), transparent 60%),
    radial-gradient(closest-side at 75% 0%, rgba(120,0,0,.55), transparent 55%),
    radial-gradient(closest-side at 50% 30%, rgba(200,0,0,.35), transparent 65%);
  mix-blend-mode:multiply;
}
.effect-fire{ position:relative; filter:contrast(1.05) saturate(1.05); }
.effect-fire::after{
  content:""; position:fixed; inset:0; pointer-events:none; z-index:9000;
  background:
    radial-gradient(1200px 200px at 50% 110%, rgba(255,120,0,.55), transparent 60%),
    radial-gradient(900px 160px at 15% 115%, rgba(255,80,0,.35), transparent 60%),
    radial-gradient(900px 160px at 85% 115%, rgba(255,80,0,.35), transparent 60%);
  mix-blend-mode:screen;
}

/* Reveal-Layer */
#reveal{
  position: fixed; inset: 0;
  background: url('images/characters_background.jpg') center/cover no-repeat fixed; /* unteres Bild */
  z-index: 0; pointer-events: none;
}
#revealCanvas{
  position: absolute; inset: 0; width: 100%; height: 100%;
}
/* UI Ã¼ber dem Canvas halten */
.app, .modal { position: relative; z-index: 1; }